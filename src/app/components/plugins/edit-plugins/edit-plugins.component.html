<app-modal *ngIf="isModalOpen && editingPlugin !== undefined" (close)="isModalOpen = false">

  <button class="w-10 h-10 fixed top-5 right-5" (click)="isModalOpen = false">
    <svg fill="#000000" height="30px" width="30px" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 460.775 460.775" xml:space="preserve">
<path d="M285.08,230.397L456.218,59.27c6.076-6.077,6.076-15.911,0-21.986L423.511,4.565c-2.913-2.911-6.866-4.55-10.992-4.55  c-4.127,0-8.08,1.639-10.993,4.55l-171.138,171.14L59.25,4.565c-2.913-2.911-6.866-4.55-10.993-4.55  c-4.126,0-8.08,1.639-10.992,4.55L4.558,37.284c-6.077,6.075-6.077,15.909,0,21.986l171.138,171.128L4.575,401.505  c-6.074,6.077-6.074,15.911,0,21.986l32.709,32.719c2.911,2.911,6.865,4.55,10.992,4.55c4.127,0,8.08-1.639,10.994-4.55  l171.117-171.12l171.118,171.12c2.913,2.911,6.866,4.55,10.993,4.55c4.128,0,8.081-1.639,10.992-4.55l32.709-32.719  c6.074-6.075,6.074-15.909,0-21.986L285.08,230.397z"/>
</svg>
  </button>

  <div class="modal">

    <h1 class="text-center w-full border-b">Editar Plugin:</h1>
    <div class="form">
      <div class="flex flex-col col-span-3 gap-3 not-sm:col-span-full">
        <img class="rounded-2xl" src="{{this.previewUrl}}" alt="foto"  height="1">
        <div class="relative bg-blue-600 p-2 rounded-2xl">
          <input
            id="file-upload"
            type="file"
            class="peer absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10"
            (change)="changeImage($event)"
          >

          <label
            for="file-upload"
            class="file-input flex items-center justify-center gap-2"
          >
            <span>Escolher imagem</span>

            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1M12 12V4m0 0L8 8m4-4l4 4" />
            </svg>
          </label>
        </div>
      </div>
      <div class="col-span-5 not-sm:col-span-full gap-3 grid grid-cols-6">

        <div class="input col-span-full">
          <label for="nome">Nome:</label>
          <input type="text" id="nome" placeholder="Nome do plugin" value="{{editingPlugin.name}}">
        </div>
        <div class="input col-span-full">
          <label for="slogan">Slogan:</label>
          <input type="text" id="slogan" placeholder="Slogan do plugin" value="{{editingPlugin.slogan}}">
        </div>
        <div class="input col-span-3">
          <label for="github">Link do github:</label>
          <input type="text" id="github" placeholder="Link do github do plugin (deixe vazio se for privado)" value="{{editingPlugin.githubLink}}">
        </div>
        <div class="input col-span-3">
          <label for="docs">Docs:</label>
          <input type="text" id="docs" placeholder="Envie o link das docs, se houver" value="{{editingPlugin.docLink}}">
        </div>
        <div class="input col-span-full">
          <label for="price">Preço (em R$):</label>
          <input (change)="priceChange($event)" type="number" id="price" placeholder="Digite o preço do plugin">
        </div>

      </div>
      <div class="col-span-full">
        <label>Categorias:</label>

        <div class="flex flex-wrap gap-3">
          <button
            class="btn rounded-full w-auto min-w-20 h-10 p-2"
            *ngFor="let category of categoryList"
            [ngClass]="isCategorySelected(category.value) ? 'selected' : 'unselected'"
            (click)="toggleCategory(category.value)"
          >
            {{ category.key }}
          </button>
        </div>

      </div>
      <div class="col-span-full">
        <label for="description">Comandos:</label>

        <textarea id="description"
                  rows="1"
                  [(ngModel)]="this.editingPlugin.commands"
                  placeholder="Digite os comandos, separe por '; '"
                  value="{{editingPlugin.commands}}"
                  class="w-full p-2 border rounded"></textarea>
      </div>
      <div class="col-span-full">
        <label for="description">Permissões:</label>

        <textarea id="description"
                  rows="1"
                  [(ngModel)]="this.editingPlugin.permissions"
                  value="{{editingPlugin.permissions}}"
                  placeholder="Digite as permissões, separe por '; '"
                  class="w-full p-2 border rounded"></textarea>
      </div>

      <div class="col-span-full">
        <label for="description">Descrição (Markdown):</label>

        <textarea id="description"
                  rows="5"
                  [(ngModel)]="this.editingPlugin.description"
                  value="{{editingPlugin.description}}"
                  placeholder="Digite a descrição em Markdown"
                  class="w-full p-2 border rounded"></textarea>
      </div>

      <div class="col-span-full mt-4">
        <label>Prévia:</label>
        <div class="border p-4 rounded max-h-70 overflow-y-scroll">
          <app-markdown text="{{this.editingPlugin.description}}"></app-markdown>
        </div>
      </div>

    </div>
    <div class="flex items-center border-t">
      <button class="btn w-full h-15">Editar</button>
    </div>


  </div>
</app-modal>
