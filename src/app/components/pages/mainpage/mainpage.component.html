<app-plugin-modal #pluginModal></app-plugin-modal>

<main>
  <app-img class="not-sm:w-[83%] w-[65%] m-[35px] anm banner_title" alt="title" src="images/banner_title.png" width="230"/>
  <h2 class="text-center text-2xl font-extralight" [innerHTML]="langService.getTranslation('landingpage', 'subtitle')"></h2>
  <div class="banner">
    <app-img class="banner_img anm" alt="banner" src="images/banner_boy.png" width="230px"/>
    <div class="banner_text">
      <h3 class="font-bold text-xl">{{ langService.getTranslation('landingpage', 'why_chose') }}</h3>
      <p class="text-justify">
        {{langService.getTranslation('landingpage', 'why_chose_desc')}}</p>
      <button class="btn w-35 h-13 m-5 font-light text-center" (click)="scrollToPlugins($event)">
        {{langService.getTranslation('landingpage', 'see_plugins')}}
      </button>
    </div>
  </div>
  <div class="plugins">
    <header>
      <p class="rounded" style="background: #1796ff">Plugins: </p>
      <a class="btn rounded" href="">{{langService.getTranslation('landingpage', 'download_core')}}</a>
    </header>
    <div class="plugins-container" id="plugins" [ngClass]="{ 'no-plugins': loadedPlugins.length === 0 }">

      <div *ngFor="let plugin of loadedPlugins" class="card">
        <img src="{{ plugin.iconUrl }}" alt="foto" width="1" height="1">
        <h3 class="font-normal">{{ plugin.name }}</h3>
        <p>{{ plugin.slogan }}</p>
        <p class="font-normal">{{ plugin.price == 0 ? "Gr√°tis" : "R$" + (plugin.price / 100) }}</p>
        <div class="flex w-full">
          <button class="btn h-10 w-1/2 m-2 flex justify-center items-center" *ngIf="!this.userService.containsPlugin(plugin.id) && plugin.price != 0" (click)="cartService.addToCart({id: plugin.id,imageUrl: plugin.iconUrl,name: plugin.name,price: plugin.price})">
            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#1f1f1f"><path d="M440-600v-120H320v-80h120v-120h80v120h120v80H520v120h-80ZM280-80q-33 0-56.5-23.5T200-160q0-33 23.5-56.5T280-240q33 0 56.5 23.5T360-160q0 33-23.5 56.5T280-80Zm400 0q-33 0-56.5-23.5T600-160q0-33 23.5-56.5T680-240q33 0 56.5 23.5T760-160q0 33-23.5 56.5T680-80ZM40-800v-80h131l170 360h280l156-280h91L692-482q-11 20-29.5 31T622-440H324l-44 80h480v80H280q-45 0-68.5-39t-1.5-79l54-98-144-304H40Z"/></svg>
          </button>
          <a href="{{plugin.downloadLink}}" target="_blank" class="btn w-32 h-10 m-2 flex items-center justify-center" *ngIf="this.userService.containsPlugin(plugin.id) || plugin.price == 0" >{{ langService.getTranslation("landingpage", "download") }}</a>
          <button (click)="pluginModal.openModal(plugin.id)" class="btn w-32 h-10 m-2" >{{ langService.getTranslation("landingpage", "see_more") }}</button>
        </div>

      </div>

      <div *ngIf="loadingPlugins"  class="spinner"></div>
      <div *ngIf="!loadingPlugins && loadedPlugins.length === 0">No plugins found</div>
    </div>
    <button routerLink="plugins" class="btn w-32 h-12 self-start m-3 not-sm:self-center">{{langService.getTranslation('landingpage', 'see_more')}}</button>
  </div>
</main>
